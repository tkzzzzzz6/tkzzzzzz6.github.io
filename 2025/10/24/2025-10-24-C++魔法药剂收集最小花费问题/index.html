<!DOCTYPE html>
<html lang="zh">
  <head>
    
    <meta charset="UTF-8">
    <title>2025-10-24-C++魔法药剂收集最小花费问题 - TK的小站</title>
    <link rel="shortcut icon" href="/static/img/icon.png">
    <link rel="icon" href="/static/img/icon.png" sizes="192x192"/>
    
<link rel="stylesheet" href="/static/kico.css">
<link rel="stylesheet" href="/static/hingle.css">

    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta property="og:site_name" content="TK的小站">
    <meta property="og:title" content="2025-10-24-C++魔法药剂收集最小花费问题"/>
    
    <style>body:before{ content: ''; background-image: url(https://api.paugram.com/wallpaper?source=gh) }</style>
    
<meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/atom.xml" title="TK的小站" type="application/atom+xml">
</head>

  <body>
    <header>
    <div class="head-title">
        <h4>TK的小站</h4>
    </div>
    <div class="head-action">
        <div class="toggle-btn"></div>
        <div class="light-btn"></div>
        <div class="search-btn"></div>
    </div>
    <form class="head-search" method="post">
        <input type="text" name="s" placeholder="搜索什么？">
    </form>
    <nav class="head-menu">
        <a href="/">首页</a>
        <div class="has-child">
            <a href>分类</a>
            <div class="sub-menu">
                <a class="category-link" href="/categories/%E8%BF%9B%E5%87%BB%E7%9A%84%E7%A0%81%E5%86%9C/">进击的码农</a>
            </div>
        </div>
        
            <a href="/about">关于我</a>
        
            <a href="/friends">朋友们</a>
        
            <a href="/tools">工具推荐</a>
        
    </nav>
</header>

    <main>
    <div class="wrap min">
        <section class="post-title">
            <h2>2025-10-24-C++魔法药剂收集最小花费问题</h2>
            <div class="post-meta">
                <time class="date">2025.10.24</time>
            
            </div>
        </section>
        <article class="post-content">
        
            <h1 id="C-魔法药剂收集最小花费问题"><a href="#C-魔法药剂收集最小花费问题" class="headerlink" title="C++ 魔法药剂收集最小花费问题"></a>C++ 魔法药剂收集最小花费问题</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.nowcoder.com/practice/1ede2daa3ab445bc8ac8ea62b6ca8201?channelPut=w251acm">魔法药剂收集 - NowCoder 题目链接</a></li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95">贪心算法 - 维基百科</a></li>
<li><a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/container/vector">C++ STL vector 用法详解</a></li>
</ul>
</blockquote>
<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>小红打算收集编号为 1∼n 的 n 种魔法药剂，其中每种药剂有两种形态：<strong>红色版本</strong>与<strong>蓝色版本</strong>。</p>
<p>获得药剂的方式如下：</p>
<ol>
<li><strong>直接购买</strong>：购买第 i 种红色版本药剂需要花费 a_i 金币</li>
<li><strong>调配合成</strong>：若已拥有红色版本的第 b_i 种与第 c_i 种药剂，可调配得到蓝色版本的第 i 种药剂，调配本身不额外花费金币（仅需保证两种原料存在）</li>
</ol>
<p>小红不关心颜色，只要求最终至少拥有 1∼n 每种药剂中的任意一种形态（红或蓝）。请计算她所需支付的最小总金币数。</p>
<h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><ul>
<li>第一行：整数 n (1 ≤ n ≤ 10^5)，表示药剂种类数量</li>
<li>第二行：n 个整数 a_1, a_2, …, a_n (1 ≤ a_i ≤ 10^4)，表示购买第 i 种红色药剂的价格</li>
<li>接下来 n 行：第 i 行输入两个整数 b_i, c_i (1 ≤ b_i, c_i ≤ n)，表示合成蓝色版本第 i 种药剂所需的两种红色药剂的编号</li>
</ul>
<h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数，表示获得 n 种不同药剂所需支付的最小金币数。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p><strong>输入：</strong></p>
<pre class="line-numbers language-none"><code class="language-none">5
2 4 10 1 3
2 3
4 5
1 2
2 5
1 4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>输出：</strong></p>
<pre class="line-numbers language-none"><code class="language-none">16<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>说明：</strong></p>
<p>一种最优方案：</p>
<ul>
<li>直接购买第 1,2,4,5 种红色药剂，花费 2+4+1+3=10</li>
<li>利用红色的 1,2 调配得到第 3 种蓝色药剂，花费 2+4=6</li>
<li>最终花费 10+6=16</li>
</ul>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><h3 id="核心思想"><a href="#核心思想" class="headerlink" title="核心思想"></a>核心思想</h3><p>这道题的关键是理解：<strong>对于每种药剂，我们需要独立决定是获得红色版本还是蓝色版本</strong>。</p>
<p>对于第 i 种药剂，有两种选择：</p>
<ol>
<li><strong>选择红色版本</strong>：成本为 <code>cost[i]</code></li>
<li><strong>选择蓝色版本</strong>：成本为 <code>cost[b_i] + cost[c_i]</code></li>
</ol>
<p>这里需要注意的是：<strong>合成蓝色药剂的成本是购买两种红色原料的成本之和</strong>，即使我们为了其他药剂已经”购买”过这些原料，仍然需要重新计算成本。</p>
<h3 id="贪心策略"><a href="#贪心策略" class="headerlink" title="贪心策略"></a>贪心策略</h3><p>对于每种药剂 i，我们选择成本更低的方案：</p>
<pre class="line-numbers language-none"><code class="language-none">min_cost[i] = min(cost[i], cost[b_i] + cost[c_i])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>最终答案为所有药剂的最小成本之和。</p>
<h3 id="为什么贪心是正确的？"><a href="#为什么贪心是正确的？" class="headerlink" title="为什么贪心是正确的？"></a>为什么贪心是正确的？</h3><p>这道题可以看作是一个<strong>独立选择问题</strong>：</p>
<ul>
<li>每种药剂的选择不会影响其他药剂的选择</li>
<li>每种药剂的成本计算是独立的</li>
<li>因此对每种药剂选择局部最优解，就能得到全局最优解</li>
</ul>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ios<span class="token double-colon punctuation">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> n<span class="token punctuation">;</span>  <span class="token comment">// 药剂种类数量</span>
    cin <span class="token operator">&gt;&gt;</span> n<span class="token punctuation">;</span>

    <span class="token comment">// 存储每种红色药剂的购买价格</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">red_cost</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cin <span class="token operator">&gt;&gt;</span> red_cost<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    ll total_cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// 最小总花费</span>

    <span class="token comment">// 对每种药剂，计算获得它的最小成本</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 读取合成配方</span>
        pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> recipe<span class="token punctuation">;</span> <span class="token comment">// 合成第 i 种蓝色药剂需要的两种红色药剂编号</span>
        cin <span class="token operator">&gt;&gt;</span> recipe<span class="token punctuation">.</span>first <span class="token operator">&gt;&gt;</span> recipe<span class="token punctuation">.</span>second<span class="token punctuation">;</span>

        <span class="token comment">// 计算两种获得方式的成本</span>
        <span class="token keyword">int</span> cost_buy_red <span class="token operator">=</span> red_cost<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 直接购买红色</span>
        <span class="token keyword">int</span> cost_make_blue <span class="token operator">=</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>first <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>second <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 合成蓝色</span>

        <span class="token comment">// 选择成本较低的方案</span>
        total_cost <span class="token operator">+=</span> <span class="token function">min</span><span class="token punctuation">(</span>cost_buy_red<span class="token punctuation">,</span> cost_make_blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//输出</span>
    cout <span class="token operator">&lt;&lt;</span> total_cost <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="代码解析"><a href="#代码解析" class="headerlink" title="代码解析"></a>代码解析</h2><h3 id="关键步骤"><a href="#关键步骤" class="headerlink" title="关键步骤"></a>关键步骤</h3><ol>
<li><p><strong>读取输入</strong></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> n<span class="token punctuation">;</span>
cin <span class="token operator">&gt;&gt;</span> n<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">red_cost</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cin <span class="token operator">&gt;&gt;</span> red_cost<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><strong>对每种药剂做决策</strong></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 读取配方</span>
    pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> recipe<span class="token punctuation">;</span>
    cin <span class="token operator">&gt;&gt;</span> recipe<span class="token punctuation">.</span>first <span class="token operator">&gt;&gt;</span> recipe<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
    
    <span class="token comment">// 计算两种方案的成本</span>
    <span class="token keyword">int</span> cost_buy_red <span class="token operator">=</span> red_cost<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> cost_make_blue <span class="token operator">=</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>first <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>second <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 选择更优方案</span>
    total_cost <span class="token operator">+=</span> <span class="token function">min</span><span class="token punctuation">(</span>cost_buy_red<span class="token punctuation">,</span> cost_make_blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><strong>注意索引转换</strong></p>
<ul>
<li>题目中药剂编号从 1 开始</li>
<li>数组索引从 0 开始</li>
<li>因此需要 <code>recipe.first - 1</code> 和 <code>recipe.second - 1</code></li>
</ul>
</li>
</ol>
<h2 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h2><ul>
<li><p><strong>时间复杂度</strong>：O(n)</p>
<ul>
<li>读取 n 个价格：O(n)</li>
<li>处理 n 种药剂，每种 O(1)：O(n)</li>
<li>总计：O(n)</li>
</ul>
</li>
<li><p><strong>空间复杂度</strong>：O(n)</p>
<ul>
<li>存储 n 个价格的数组：O(n)</li>
</ul>
</li>
</ul>
<h2 id="示例验证"><a href="#示例验证" class="headerlink" title="示例验证"></a>示例验证</h2><h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><pre class="line-numbers language-none"><code class="language-none">5
2 4 10 1 3
2 3
4 5
1 2
2 5
1 4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="处理过程"><a href="#处理过程" class="headerlink" title="处理过程"></a>处理过程</h3><table>
<thead>
<tr>
<th>药剂编号</th>
<th>红色成本</th>
<th>配方</th>
<th>蓝色成本</th>
<th>选择</th>
<th>成本</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>2</td>
<td>(2,3)</td>
<td>4+10=14</td>
<td>红色</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
<td>(4,5)</td>
<td>1+3=4</td>
<td>两者均可</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>10</td>
<td>(1,2)</td>
<td>2+4=6</td>
<td>蓝色</td>
<td>6</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>(2,5)</td>
<td>4+3=7</td>
<td>红色</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>(1,4)</td>
<td>2+1=3</td>
<td>两者均可</td>
<td>3</td>
</tr>
</tbody></table>
<p><strong>总成本</strong>：2 + 4 + 6 + 1 + 3 = <strong>16</strong> ✓</p>
<h3 id="代码运行"><a href="#代码运行" class="headerlink" title="代码运行"></a>代码运行</h3><pre class="line-numbers language-none"><code class="language-none">输入：
5
2 4 10 1 3
2 3
4 5
1 2
2 5
1 4

输出：
16<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h2><h3 id="错误理解-1：原料复用"><a href="#错误理解-1：原料复用" class="headerlink" title="错误理解 1：原料复用"></a>错误理解 1：原料复用</h3><p>❌ <strong>错误想法</strong>：购买一些红色药剂，然后用它们可以免费合成多个蓝色药剂。</p>
<p>✅ <strong>正确理解</strong>：每种药剂的成本是独立计算的，不存在”原料复用”的概念。</p>
<h3 id="错误理解-2：全局优化"><a href="#错误理解-2：全局优化" class="headerlink" title="错误理解 2：全局优化"></a>错误理解 2：全局优化</h3><p>❌ <strong>错误想法</strong>：需要枚举所有可能的购买方案，找到全局最优解。</p>
<p>✅ <strong>正确理解</strong>：这是一个独立决策问题，每种药剂选择局部最优即可。</p>
<h3 id="索引转换"><a href="#索引转换" class="headerlink" title="索引转换"></a>索引转换</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ❌ 错误：直接使用编号</span>
<span class="token keyword">int</span> cost_make_blue <span class="token operator">=</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>first<span class="token punctuation">]</span> <span class="token operator">+</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>second<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ 正确：编号减1转为索引</span>
<span class="token keyword">int</span> cost_make_blue <span class="token operator">=</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>first <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>second <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="扩展思考"><a href="#扩展思考" class="headerlink" title="扩展思考"></a>扩展思考</h2><h3 id="变体-1：限制购买数量"><a href="#变体-1：限制购买数量" class="headerlink" title="变体 1：限制购买数量"></a>变体 1：限制购买数量</h3><p>如果题目要求最多只能购买 k 种红色药剂，该如何解决？</p>
<p><strong>思路</strong>：这就变成了一个更复杂的优化问题，需要考虑依赖关系，可能需要用到图论或动态规划。</p>
<h3 id="变体-2：合成也需要花费"><a href="#变体-2：合成也需要花费" class="headerlink" title="变体 2：合成也需要花费"></a>变体 2：合成也需要花费</h3><p>如果合成蓝色药剂本身也需要花费 cost_mix[i]，该如何修改？</p>
<p><strong>修改</strong>：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> cost_make_blue <span class="token operator">=</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>first <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> red_cost<span class="token punctuation">[</span>recipe<span class="token punctuation">.</span>second <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> cost_mix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="变体-3：考虑依赖关系"><a href="#变体-3：考虑依赖关系" class="headerlink" title="变体 3：考虑依赖关系"></a>变体 3：考虑依赖关系</h3><p>如果合成配方可能形成依赖环（例如：蓝1需要红2，蓝2需要红1），该如何处理？</p>
<p><strong>思路</strong>：需要检测环并做特殊处理，保证至少有一个被购买为红色版本。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这道题的核心是：</p>
<ol>
<li><strong>正确理解题意</strong>：每种药剂的成本是独立计算的</li>
<li><strong>贪心策略</strong>：对每种药剂选择成本更低的方案</li>
<li><strong>注意细节</strong>：索引转换（编号从1开始，数组从0开始）</li>
</ol>
<p>代码简洁高效，时间复杂度为 O(n)，适合处理题目给定的数据规模（n ≤ 10^5）。</p>

        </article>
        <section class="post-near">
            <ul>
                
                    <li>上一篇: <a href="/2025/10/24/2025-10-24-Google%20Drive%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/">2025-10-24-Google Drive 命令行下载文件完整指南</a></li>
                
                
                    <li>下一篇: <a href="/2025/10/23/2025-10-23-C++%E6%B1%82%E9%98%B6%E4%B9%98%E6%9C%AB%E5%B0%BE%E9%9D%9E%E9%9B%B6%E6%95%B0%E5%AD%97/">2025-10-23-C++求阶乘末尾非零数字</a></li>
                
            </ul>
        </section>
        
            <section class="post-tags">
            <a class="-none-link" href="/tags/algorithm/" rel="tag">算法学习</a>
            </section>
        
    
        <section class="post-author">
        
            <figure class="author-avatar">
                <img src="https://tk-pichost-1325224430.cos.ap-chengdu.myqcloud.com/blog/20250927100251272.jpg?imageSlim" alt="ttkqwe" />
            </figure>
        
            <div class="author-info">
                <h4>ttkqwe</h4>
                <p>计算机大三学生，喜欢研究一些乱七八糟的东西，目前研究方向是深度学习。本站未注明转载的文章均为原创，并采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow">CC BY-NC-SA 4.0</a> 授权协议，<span style="color: #E91E63">转载请注明来源</span>，谢谢！</p>
            </div>
        </section>
    
    </div>
</main>

    <footer>
    <div class="buttons">
        <button class="to-top" href="#"></button>
    </div>
    <div class="wrap min">
        <section class="widget">
            <div class="row">
                <div class="col-m-4">
                    <h3 class="title-recent">最新文章：</h3>
                    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2025/10/26/2025-10-26-C++%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84k%E5%8F%89%E6%A0%91%E6%9C%80%E4%BC%98%E6%A0%B9%E8%8A%82%E7%82%B9%E9%80%89%E6%8B%A9%E9%97%AE%E9%A2%98/">2025-10-26-C++树形结构k叉树最优根节点选择问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/10/24/2025-10-24-Google%20Drive%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/">2025-10-24-Google Drive 命令行下载文件完整指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/10/24/2025-10-24-C++%E9%AD%94%E6%B3%95%E8%8D%AF%E5%89%82%E6%94%B6%E9%9B%86%E6%9C%80%E5%B0%8F%E8%8A%B1%E8%B4%B9%E9%97%AE%E9%A2%98/">2025-10-24-C++魔法药剂收集最小花费问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/10/23/2025-10-23-C++%E6%B1%82%E9%98%B6%E4%B9%98%E6%9C%AB%E5%B0%BE%E9%9D%9E%E9%9B%B6%E6%95%B0%E5%AD%97/">2025-10-23-C++求阶乘末尾非零数字</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/10/19/2025-10-19-C++%E7%BB%9D%E5%AF%B9%E5%80%BC%E5%87%BD%E6%95%B0%E8%AF%A6%E8%A7%A3/">2025-10-19-C++绝对值函数详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/10/17/2025-10-17-C++%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8A%A0%E9%80%9F%E8%AF%A6%E8%A7%A3/">2025-10-17-C++输入输出加速详解</a></li></ul>
                </div>
                <div class="col-m-4">
                    <h3 class="title-date">时光机：</h3>
                    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/10/">十月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">七月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">六月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">五月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">四月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1970/01/">一月 1970</a></li></ul>
                </div>
                <div class="col-m-4">
                    <h3 class="title-tags">标签云：</h3>
                    <a href="/tags/mathematical-modeling/" style="font-size: 10px;">数学建模</a> <a href="/tags/deep-learning/" style="font-size: 13.33px;">深度学习</a> <a href="/tags/development/" style="font-size: 16.67px;">程序开发</a> <a href="/tags/algorithm/" style="font-size: 15px;">算法学习</a> <a href="/tags/algorithm-practice/" style="font-size: 15px;">算法练习</a> <a href="/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" style="font-size: 11.67px;">论文阅读</a> <a href="/tags/course/" style="font-size: 20px;">课程学习</a> <a href="/tags/troubleshooting/" style="font-size: 18.33px;">问题解决</a>
                </div>
            </div>
        </section>
        <section class="sub-footer">
            <p>
                © 2025 <a href="/">TK的小站</a>. All Rights Reserved. Theme By <a href="https://github.com/Dreamer-Paul/Hingle" target="_blank" rel="nofollow">Hingle</a>.
                
                    &nbsp;|&nbsp;
                    <a href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
                        蜀ICP备2025165253号
                    </a>
                
                
            </p>
        </section>
    </div>
</footer>


<script src="/static/kico.js"></script>
<script src="/static/hingle.js"></script>


<script>var hingle = new Paul_Hingle({"copyright":true,"night":true});</script>

<style>
.police-beian{display:inline-flex;align-items:center;gap:4px}
.police-icon{display:inline-block;width:16px;height:16px;background:#e91e63;border-radius:2px;opacity:.85}
/* 说明：如需官方警徽图标，可将 .police-icon 的 background 设置为图片：
   background:url('https://www.beian.gov.cn/img/ghs.png') no-repeat center/contain; */
</style>

  </body>
</html>
